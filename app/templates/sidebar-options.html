{% if chats %}
<h1 class="text-3xl font-semibold mb-4 text-center">Chat Info</h1>

<div class="flex flex-row justify-evenly">
    <label class="inline-flex items-center mb-5 cursor-pointer">
        <input id="toggle-edit" type="checkbox" value="" class="sr-only peer">
        <div
            class="relative w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600">
        </div>
        <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300">Toggle Editing</span>
    </label>
</div>

<div class="flex flex-col justify-start flex-1 overflow-y-auto ">
    <form method="POST" action="{{ url_for('chats', chat_id=chat.id) }}" class="flex flex-col mb-4">
        <label class="font-bold">Chat Title</label>
        <input name="title" type="text" value="{{ chat.title }}"
            class="enabled-disabled p-2 border rounded-xl  bg-zinc-700 text-white" disabled></input>
        <button type="submit"
            class="enabled-disabled bg-gray-500 text-white p-2 rounded-xl  text-center hover:bg-gray-700"
            disabled>Change</button>
    </form>

    <form method="POST" action="{{ url_for('chats', chat_id=chat.id) }}" class="flex flex-col mb-4">
        <label class="font-bold">Chat Notes</label>
        <textarea id="message-input" type="text" name="notes"
            class="enabled-disabled p-2 border rounded-xl  bg-zinc-700 text-white" rows="4"
            disabled>{{ chat.notes if chat.notes }}</textarea>
        <button type="submit"
            class="enabled-disabled bg-gray-500 text-white p-2 rounded-xl  text-center hover:bg-gray-700"
            disabled>Update</button>
    </form>

    <form method="POST" action="{{ url_for('chats', chat_id=chat.id) }}" class="flex flex-col mb-4">
        <label class="font-bold">System prompt</label>
        <textarea id="message-input" type="text" name="system_prompt"
            class="enabled-disabled p-2 border rounded-xl  bg-zinc-700 text-white" rows="4"
            disabled>{{ chat.system_prompt if chat.system_prompt }}</textarea>
        <button type="submit"
            class="enabled-disabled bg-gray-500 text-white p-2 rounded-xl  text-center hover:bg-gray-700"
            disabled>Update</button>
    </form>

    <form method="POST" action="{{ url_for('chats', chat_id=chat.id) }}" class="flex flex-col mb-4"
        onsubmit="return confirm('Are you sure you want to complete this chat?');">
        <input type="hidden" name="completed" value="True">
        <button type="submit"
            class="enabled-disabled bg-gray-500 text-white p-2 rounded-xl text-center hover:bg-gray-700"
            disabled>Complete Chat</button>
    </form>

    <form method="POST" action="{{ url_for('chats', chat_id=chat.id) }}" class="flex flex-col mb-4"
        onsubmit="return confirm('Are you sure you want to delete this chat?');">
        <input type="hidden" name="deleted" value="True">
        <button type="submit"
            class="enabled-disabled bg-red-500 text-white p-2 rounded-xl text-center hover:bg-gray-700" disabled>Delete
            Chat</button>
    </form>
</div>

<a href="{{ url_for('admin') }}" class="bg-gray-500 text-white p-2 rounded-xl text-center mt-4 block hover:bg-gray-700">
    Admin Panel
</a>

<script>
    const inputs = document.querySelectorAll(".enabled-disabled");
    const toggleEdit = document.getElementById("toggle-edit");

    toggleEdit.addEventListener("change", () => {
        inputs.forEach(el => {
            el.disabled = !el.disabled;
        });
    });
</script>
{% endif %}